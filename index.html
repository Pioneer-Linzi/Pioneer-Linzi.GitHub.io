<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>blog-linzi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="linzi">
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="blog-linzi">
<meta property="og:url" content="blog-linzi.cn/index.html">
<meta property="og:site_name" content="blog-linzi">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="blog-linzi">
  
    <link rel="alternate" href="/atom.xml" title="blog-linzi" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">blog-linzi</a></h1>
    <p><a href="/">Record the past,enjoy life!</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/08/08/web/js/angular/angular-学习/">
  <time datetime="2016-08-08T13:40:21.000Z">
    2016-08-08
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/08/08/web/js/angular/angular-学习/">angular-学习</a></h1>
  

  </header>
  
  <div class="entry">
    
      
    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/08/05/javaweb/项目中的动态数据源 (复件)/">
  <time datetime="2016-08-05T02:41:04.000Z">
    2016-08-05
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/08/05/javaweb/项目中的动态数据源 (复件)/">ubuntu java的安装与配置</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>两种配置方式</p>
<p>第一:</p>
<p>在 Ubuntu 中使用 PPA 安装 Java 8 ( 支持 Ubuntu 10.04 - Ubuntu 14.04 ):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">sudo add-apt-repository ppa:webupd8team/java</div><div class="line"></div><div class="line">sudo apt-get update</div><div class="line"></div><div class="line">sudo apt-get install Oracle-java8-installer</div></pre></td></tr></table></figure></p>
<p>完成之后可以通过以下命令来查看版本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">javac -version</div></pre></td></tr></table></figure></p>
<p>安装 Java 8 需要接受许可，如果你想自动安装，那么可以在安装之前运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo oracle-java8-installer shared/accepted-oracle-license-v1-1 select true | sudo /usr/bin/debconf-set-selections</div></pre></td></tr></table></figure>
<p>设置 Java 8 环境变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">sudo apt-get install oracle-java8-set-default</div></pre></td></tr></table></figure></p>
<p>切换为 Java 7 ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo update-java-alternatives -s java-7-oracle</div></pre></td></tr></table></figure></p>
<p>再切换为 Java 8：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">sudo update-java-alternatives -s java-8-oracle</div></pre></td></tr></table></figure></p>
<p>第二种：</p>
<p>1.下载JDK<br>下载地址：www.oracle.com/technetwork/java/javase/downloads/index.html<br>：<br>2.解压安装<br>我们把JDK安装到这个路径：/usr/lib/jvm<br>如果没有这个目录（第一次当然没有），我们就新建一个目录<br>cd /usr/lib<br>sudo mkdir jvm<br>建立好了以后，我们来到刚才下载好的压缩包的目录，解压到我们刚才新建的文件夹里面去，并且修改好名字方便我们管理<br>sudo tar zxvf ./jdk-7-linux-i586.tar.gz  -C /usr/lib/jvm cd /usr/lib/jvm sudo mv jdk1.7.0_05/ jdk7<br> 3.配置环境变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gedit ~/.bashrc</div></pre></td></tr></table></figure></p>
<p>在打开的文件的末尾添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/usr/lib/jvm/jdk7 </div><div class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre </div><div class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib </div><div class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</div></pre></td></tr></table></figure></p>
<p>保存退出，然后输入下面的命令来使之生效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source ~/.bashrc</div></pre></td></tr></table></figure></p>
<p> 4.配置默认JDK<br>由于一些Linux的发行版中已经存在默认的JDK，如OpenJDK等。所以为了使得我们刚才安装好的JDK版本能成为默认的JDK版本，我们还要进行下面的配置。<br>执行下面的命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/jdk7/bin/java 300 </div><div class="line">sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/jdk7/bin/javac 300</div></pre></td></tr></table></figure></p>
<p> 注意：如果以上两个命令出现找不到路径问题，只要重启一下计算机在重复上面两行代码就OK了。<br>执行下面的代码可以看到当前各种JDK版本和配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo update-alternatives --config java</div></pre></td></tr></table></figure></p>
<p> 5.测试<br>打开一个终端，输入下面命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -version</div></pre></td></tr></table></figure></p>
<p>显示结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">java version &quot;1.7.0_05&quot; Java(TM) SE Runtime Environment (build 1.7.0_05-b05) </div><div class="line">Java HotSpot(TM) Server VM (build 23.1-b03, mixed mode)</div></pre></td></tr></table></figure></p>
<p>这表示java命令已经可以运行了。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/08/05/javaweb/项目中的动态数据源/">
  <time datetime="2016-08-05T02:41:04.000Z">
    2016-08-05
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/08/05/javaweb/项目中的动态数据源/">项目中的动态数据源</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h3 id="平时项目中遇到的问题"><a href="#平时项目中遇到的问题" class="headerlink" title="平时项目中遇到的问题"></a>平时项目中遇到的问题</h3><h4 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h4><p>项目中要用到sql来查询，就是写一些类似一数据库的图形化界面的查询，但是我一个界面同时会有多少数据源的sql 那这就问题来了，我们这边就要去动态的切换数据源了，那以前我写过一个用hibernate 的动态的切换数据源的方法，但那个切换数据源是可以，但是也要同时的去切换不同的方言，也就是不同的sessoinFactory,但是因为项目中的原来的框架的搭建的原因，我们这边用不了我们这边的动态的切换sessionFactory的方法 ，但是是可以实现的，那我们为什么不能用更直接的方法呢？</p>
<h4 id="解决问题的思路"><a href="#解决问题的思路" class="headerlink" title="解决问题的思路"></a>解决问题的思路</h4><p>这里我们由原来的hibernate 的切换数据源的方式改为用jdbc的连接方式，那我们这直接用jdbc的方式的话，那连接的方式就太慢了，那我要选一个数据源的连接池吧，我们常用的数据源的连接池有c3po 与 dbcp 那，我们这边不再做对比 ，我们直接选用的是dbcp 那，我们怎么来做这个动态的切换呢，你要是说用到了就new 一个，那你这个也太笨了吧，那我们这边用到的是我们把数据源的连接的配置信息放到我们的一个主数据库中，用一个表来维护这个多个数据源的配置信息，当我们要用到什么数据源，那我们就去数据库中去找，去设置这个数据源，那这个也太行了，跟jdbc 没有什么区别了，那把新建出来的数据源的连接池存到一个Map中，当然这个Map是一个全局的静态的，那这样就可以了，ok有了思路，那这里就是写代码了，那就开始吧！</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/08/03/linux/linux系统的备份与还原/">
  <time datetime="2016-08-03T15:14:43.000Z">
    2016-08-03
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/08/03/linux/linux系统的备份与还原/">linux系统的备份与还原</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>[TOC] </p>
<h3 id="linux平时的使用"><a href="#linux平时的使用" class="headerlink" title="linux平时的使用"></a>linux平时的使用</h3><p>我用linux 平时都用来干什么了呢？</p>
<h4 id="java开发"><a href="#java开发" class="headerlink" title="java开发"></a>java开发</h4><p>我在linux主要用的是idea这个做的开发工具，平时工作的时候也都是用这个的</p>
<h4 id="前端开发"><a href="#前端开发" class="headerlink" title="前端开发"></a>前端开发</h4><p>前端开发我现在主要用的vim 这个东西 ，我还没有学习太多，我感觉这个东西学习起来还是比较慢的，但是我还是慢慢的用吧，平时多用一点，最后还是会成一个比较牛的人的</p>
<h4 id="写日志写博客"><a href="#写日志写博客" class="headerlink" title="写日志写博客"></a>写日志写博客</h4><p>主要用的是hexo 来写的日志，并在github上显示，我都感觉我用在window上会老出问题</p>
<h4 id="主要是想学点C-语言的东西"><a href="#主要是想学点C-语言的东西" class="headerlink" title="主要是想学点C 语言的东西"></a>主要是想学点C 语言的东西</h4><p>以前呢，学习c++的时候就主要用的是linux 那个时候都没有学好，不过学会了好多东西 ，其实好多的东西时间一长不去看的话都是会忘了的，那不如我写个博客记下来，这样有空看的时候，我还是能记起来的，有的时候自己学了什么都不知道 ，这样的情况还是有的，所以有的时候，自己学会的东西一定要记录下来，不管是用什么东西去记吧</p>
<h4 id="服务器这东西，我还是比较喜欢的"><a href="#服务器这东西，我还是比较喜欢的" class="headerlink" title="服务器这东西，我还是比较喜欢的"></a>服务器这东西，我还是比较喜欢的</h4><p>以前都老感觉做这方面的人都是比较牛的吧，最近也一起想学，那现在正好是两个电脑 ，我也能学习到我想学习的东西。</p>
<h3 id="使用系统备份的重要性"><a href="#使用系统备份的重要性" class="headerlink" title="使用系统备份的重要性"></a>使用系统备份的重要性</h3><p>就我现在来说吧，我对我的电脑安装了好多的ide与各种设置，那么，我可能因为什么原因，电脑就不行了，那我这个时候可能要重新的对我的电脑进行设置了，那跟window下的时候一样，我可能会用到ghost 这个东西，把关键的东西给备份下来，那到时候我就不用重新来</p>
<h3 id="linux-系统备份是怎么备份的"><a href="#linux-系统备份是怎么备份的" class="headerlink" title="linux 系统备份是怎么备份的"></a>linux 系统备份是怎么备份的</h3><p>系统的备份的命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /</div><div class="line">sudo tar cvpzf backup.tgz --exclude=/proc --exclude=/mnt --exclude=/sys --exclude=/backup.tgz /</div></pre></td></tr></table></figure></p>
<p>系统的还原<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar xvpfz backup.tgz -C /</div></pre></td></tr></table></figure></p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/12/csdn/Arch linux 的安装/">
  <time datetime="2016-06-12T02:51:11.000Z">
    2016-06-12
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/12/csdn/Arch linux 的安装/">Arch linux 的安装</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="arch-linux-的安装"><a href="#arch-linux-的安装" class="headerlink" title="arch linux 的安装"></a>arch linux 的安装</h2><p>家里有一台300块买的台式机，感觉就装这个比较好一点，本文是自用与学习的记录，有不少配置是没有配置的，这是自己总结的感觉比较好设置一点的</p>
<p>##参考<br>    <a href="http://bbs.archlinuxcn.org/viewtopic.php?id=1037" target="_blank" rel="external">http://bbs.archlinuxcn.org/viewtopic.php?id=1037</a></p>
<h2 id="U盘的制作"><a href="#U盘的制作" class="headerlink" title="U盘的制作"></a>U盘的制作</h2><p>我用的是linux 下的 dd<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dd  if=xxx.iso of=/dev/sdb bs=1M</div></pre></td></tr></table></figure></p>
<h2 id="开机启动到U盘"><a href="#开机启动到U盘" class="headerlink" title="开机启动到U盘"></a>开机启动到U盘</h2><p>我用的UEFI ,这里我们开机用UEFI启动模式，启动到Arch linux<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># ls /sys/firmware/efi/efivars</div></pre></td></tr></table></figure></p>
<h2 id="这里的键盘布局-连接到因特网，更新系统时间都省略"><a href="#这里的键盘布局-连接到因特网，更新系统时间都省略" class="headerlink" title="这里的键盘布局 连接到因特网，更新系统时间都省略"></a>这里的键盘布局 连接到因特网，更新系统时间都省略</h2><h2 id="识别设备"><a href="#识别设备" class="headerlink" title="识别设备"></a>识别设备</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># lsblk</div></pre></td></tr></table></figure>
<h2 id="分区工具"><a href="#分区工具" class="headerlink" title="分区工具"></a>分区工具</h2><p>这里我用的是cfdisk<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#cfdisk /dev/sda</div></pre></td></tr></table></figure></p>
<h2 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h2><p>看自已分吧，这里不细说了</p>
<h2 id="格式化分区"><a href="#格式化分区" class="headerlink" title="格式化分区"></a>格式化分区</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkfs.ext4 格式化为Ext4格式 </div><div class="line">   为让 genfstab 能生成fstab时包含 交换分区，须先激活交换分区</div><div class="line">   mkswap 格式化为swap用swapon命令激活</div></pre></td></tr></table></figure>
<h2 id="修改源"><a href="#修改源" class="headerlink" title="修改源"></a>修改源</h2><p>这里我用的是163的源<br>x86_64用下面这个<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Server = http://mirrors.163.com/archlinux/$repo/os/$arch</div></pre></td></tr></table></figure></p>
<p>i686用这个<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Server = http://mirrors.163.com/archlinux/$repo/os/i686</div><div class="line">Server = http://mirrors.sohu.com/archlinux/$repo/os/i686</div></pre></td></tr></table></figure></p>
<h2 id="安装基础系统"><a href="#安装基础系统" class="headerlink" title="安装基础系统"></a>安装基础系统</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># pacstrap -i /mnt base base-devel</div></pre></td></tr></table></figure>
<h2 id="安装syslinux"><a href="#安装syslinux" class="headerlink" title="安装syslinux"></a>安装syslinux</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pacman -S syslinux</div></pre></td></tr></table></figure>
<h2 id="更新syslinux"><a href="#更新syslinux" class="headerlink" title="更新syslinux"></a>更新syslinux</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">syslinux-install_update -iam</div></pre></td></tr></table></figure>
<h2 id="修改syslinux配置文件"><a href="#修改syslinux配置文件" class="headerlink" title="修改syslinux配置文件"></a>修改syslinux配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">修改正确的/boot/syslinux/syslinux.cfg</div><div class="line">   中的Root分区，把wr 改为ro</div></pre></td></tr></table></figure>
<p><strong>这里要注意root 目录的设备的设定</strong> </p>
<h2 id="启用开机网络"><a href="#启用开机网络" class="headerlink" title="启用开机网络"></a>启用开机网络</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl enable dhcpcd</div></pre></td></tr></table></figure>
<h2 id="添加管理员密码"><a href="#添加管理员密码" class="headerlink" title="添加管理员密码"></a>添加管理员密码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd</div></pre></td></tr></table></figure>
<h2 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">	</div><div class="line">useradd -m -g users  -s /bin/bash linzi</div><div class="line">添加用户密码</div></pre></td></tr></table></figure>
<h2 id="安装xorg"><a href="#安装xorg" class="headerlink" title="安装xorg"></a>安装xorg</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pacman -Syy</div><div class="line">   pacman -S xorg</div></pre></td></tr></table></figure>
<h2 id="安装xfce4"><a href="#安装xfce4" class="headerlink" title="安装xfce4"></a>安装xfce4</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pacman -S xfce4</div></pre></td></tr></table></figure>
<h2 id="安装chromium"><a href="#安装chromium" class="headerlink" title="安装chromium"></a>安装chromium</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pacman -S chromium</div></pre></td></tr></table></figure>
<h2 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h2><p>pacman -S wqy-zenhei ttf-fireflysung(flash乱码)</p>
<h2 id="bash-ifconfig-command-not-found"><a href="#bash-ifconfig-command-not-found" class="headerlink" title="bash: ifconfig: command not found"></a>bash: ifconfig: command not found</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pacman -S net-tools dnsutils inetutils iproute2</div></pre></td></tr></table></figure>
    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/12/csdn/Hibernate get和load区别/">
  <time datetime="2016-06-12T02:51:11.000Z">
    2016-06-12
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/12/csdn/Hibernate get和load区别/">Hibernate get和load区别</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>get和load方式是根据id取得一个记录<br>下边详细说一下get和load的不同，因为有些时候为了对比也会把find加进来。</p>
<p>1.从返回结果上对比：<br>load方式检索不到的话会抛出org.hibernate.ObjectNotFoundException异常<br>get方法检索不到的话会返回null</p>
<p>2.从检索执行机制上对比： get方法和find方法都是直接从数据库中检索 而load方法的执行则比较复杂首先查找session的persistent Context中是否有缓存，如果有则直接返回 如果没有则判断是否是lazy，如果不是直接访问数据库检索，查到记录返回，查不到抛出异常 如果是lazy则需要建立代理对象，对象的initialized属性为false，target属性为null 在访问获得的代理对象的属性时,检索数据库，如果找到记录则把该记录的对象复制到代理对象的target上，并将initialized=true，如果找不到就抛出异常。</p>
<p>3.根本区别说明<br>如果你使用load方法，hibernate认为该id对应的对象（数据库记录）在数据库中是一定存在的，所以它可以放心的使用，它可以放心的使用代理来 延迟加载该对象。在用到对象中的其他属性数据时才查询数据库，但是万一数据库中不存在该记录，那没办法，只能抛异常。所说的load方法抛异常是指在使用 该对象的数据时，数据库中不存在该数据时抛异常，而不是在创建这个对象时(注意：这就是由于“延迟加载”在作怪)。</p>
<p>由于session中的缓存对于hibernate来说是个相当廉价的资源，所以在load时会先查一下session缓存看看该id对应的对象是否存在，不存在则创建代理。所以如果你知道该id在数据库中一定有对应记录存在就可以使用load方法来实现延迟加载。</p>
<p>对于get方法，hibernate会确认一下该id对应的数据是否存在，首先在session缓存中查找，然后在二级缓存中查找，还没有就查数据库，数据库中没有就返回null。</p>
<p>对于load和get方法返回类型：虽然好多书中都这么说：“get()永远只返回实体类”，但实际上这是不正确的，get方法如果在 session缓存中找到了该id对应的对象，如果刚好该对象前面是被代理过的，如被load方法使用过，或者被其他关联对象延迟加载过，那么返回的还是 原先的代理对象，而不是实体类对象，如果该代理对象还没有加载实体数据（就是id以外的其他属性数据），那么它会查询二级缓存或者数据库来加载数据，但是 返回的还是代理对象，只不过已经加载了实体数据。</p>
<p>get方法首先查询session缓存，没有的话查询二级缓存，最后查询数据库；反而load方法创建时首先查询session缓存，没有就创建代理，实际使用数据时才查询二级缓存和数据库。</p>
<p>4.简单总结</p>
<p>总之对于get和load的根本区别，一句话，hibernate对于load方法认为该数据在数据库中一定存在，可以放心的使用代理来延迟加载，如果在使用过程中发现了问题，只能抛异常；而对于get方法，hibernate一定要获取到真实的数据，否则返回null。</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/12/csdn/hibernate 中的方言与数据库中的数据类型不对应问题/">
  <time datetime="2016-06-12T02:51:11.000Z">
    2016-06-12
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/12/csdn/hibernate 中的方言与数据库中的数据类型不对应问题/">hibernate 中的方言与数据库中的数据类型不对应问题</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>有时候会遇到 hibernate  no mapping Dialect type -9 之类的，这个就是方言与数据库中的数据类型不对应问题 ，那先说一下解决思路</p>
<h2 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h2><p>－ 换方言<br>－数据库中表类型换了<br>－继承hibernate 中的方言，重写hibernate 的数据类型对应关系<br>在第一个方法不可以的情况下，第二个显然是最好的解决方法!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">import org.hibernate.dialect.SQLServerDialect;</div><div class="line"></div><div class="line">/**</div><div class="line"> * 自定义方言的类，用于解决hibernate中方言与数据库不类型不对的问题</div><div class="line"> */</div><div class="line"></div><div class="line">public class SqlServer2008Dialect extends SQLServerDialect &#123;</div><div class="line"></div><div class="line">    public SqlServer2008Dialect() &#123;</div><div class="line">        super();</div><div class="line">        registerHibernateType(1, &quot;string&quot;);</div><div class="line">        registerHibernateType(-9, &quot;string&quot;);</div><div class="line">        registerHibernateType(-16, &quot;string&quot;);</div><div class="line">        registerHibernateType(3, &quot;double&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最后在改写一下hibernate 中方言类的配置就可以了!</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/12/csdn/hibernate 调用存储过程/">
  <time datetime="2016-06-12T02:51:11.000Z">
    2016-06-12
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/12/csdn/hibernate 调用存储过程/">hibernate 调用存储过程</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li>可以用hibernate 里面的CreateSqlQuery 来执行，这个比较明显，其实就是跟jdbc调用是一样的</li>
<li>可以用hibernate 里面的session.doWork()方法来执行，那个估计不常用吧， <h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2>1.用createSqlQuery 来查询<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String sql=&quot;&#123;call 存储过程名(?,?)&#125;&quot;</div><div class="line">SQLQuery query = session.createSQLQuery(sql);</div></pre></td></tr></table></figure>
</li>
</ol>
<p>? 问号中是要传的参数，跟jdbc调用存储过程一样的jdbc 可以参看我的另一个博文<br>2.用session.doWork();来执行，这个我想的比较复杂，看看你们用什么方法，<br>这个没有现成的代码了，我就说一下思路，<br>session.doWork();里面要传一个参数是Work 这个类的实例<br>那Work 是一个抽像类，这里我先写一个内部类，实现了Work 类，再重写execute()方法，再定义sql 跟ResultSet,这里还是贴上简单的代码吧<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">public class DoWork implements Work &#123;</div><div class="line"></div><div class="line">	private String sql;</div><div class="line">	private ResultSet rs;</div><div class="line"></div><div class="line">	public String getSql() &#123;</div><div class="line">		return sql;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setSql(String sql) &#123;</div><div class="line">		this.sql = sql;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public ResultSet getRs() &#123;</div><div class="line">		return rs;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setRs(ResultSet rs) &#123;</div><div class="line">		this.rs = rs;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void execute(Connection connection) throws SQLException &#123;</div><div class="line">			CallableStatement cs=connection.prepareCall(sql);</div><div class="line">			cs.execute();</div><div class="line">			this.setRs(cs.getResultSet());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样，在session.doWork()前定义Dowork对像，再SetSql<br>再Session.doWork(doWork)之后，再doWork.getRs()来获取结果集，<br>如果要传入参数 ，那就写一个数组吧，这个不再研究!</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/12/csdn/java 中用到的jdbc 调用存储过程与hibernate 调用存储过程 /">
  <time datetime="2016-06-12T02:51:11.000Z">
    2016-06-12
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/12/csdn/java 中用到的jdbc 调用存储过程与hibernate 调用存储过程 /">java 中用到的jdbc 调用存储过程与hibernate 调用存储过程</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="jdbc-中调用存储过程"><a href="#jdbc-中调用存储过程" class="headerlink" title="jdbc 中调用存储过程"></a>jdbc 中调用存储过程</h2><p>其实都是用是的Connection 来得到CallableStatement ,用CallableStatement的对像来查询，然后得到ResultSet 后面的就一样了，<br>那说一个要注意的问题吧，有的时候用java的jdbc 中调用存储过程与hibernate 调用存储过程，会遇到没有返回结果集的问题，其实只要在存储过程中 加上一句<br><figure class="highlight plain"><figcaption><span>nocount on</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`</div></pre></td></tr></table></figure></p>
<p>这样就ok了，<br>下面是jdbc 调用存储过程 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">import java.sql.CallableStatement;</div><div class="line">import java.sql.Connection;</div><div class="line">import java.sql.DriverManager;</div><div class="line">import java.sql.ResultSet;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by Geek on 2016/6/15.</div><div class="line"> */</div><div class="line">public class JDBCTest &#123;</div><div class="line"></div><div class="line"></div><div class="line">        private String driverName = &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;;//加载驱动程序</div><div class="line">        private String url = &quot;jdbc:sqlserver://10.1.42.34:1433;DatabaseName=HS_BI&quot;;//设置数据库连接串</div><div class="line">        private String user = &quot;sa&quot;;//数据库登录用户名</div><div class="line">        private String password = &quot;Wonders2009&quot;;//数据库登录密码</div><div class="line">        private static String message = &quot;恭喜，数据库连接正常！&quot;;</div><div class="line">        public void setDriverName(String newDriverName) &#123;</div><div class="line">            driverName = newDriverName;</div><div class="line">        &#125;</div><div class="line">        public String getDriverName() &#123;</div><div class="line">            return driverName;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public void setUrl(String newUrl) &#123;</div><div class="line">            url = newUrl;</div><div class="line">        &#125;</div><div class="line">        public String getUrl() &#123;</div><div class="line">            return url;</div><div class="line">        &#125;</div><div class="line">        public void setUser(String newUser) &#123;</div><div class="line">            user = newUser;</div><div class="line">        &#125;</div><div class="line">        public String getUser() &#123;</div><div class="line">            return user;</div><div class="line">        &#125;</div><div class="line">        public void setPassword(String newPassword) &#123;</div><div class="line">            password = newPassword;</div><div class="line">        &#125;</div><div class="line">        public String getPassword() &#123;</div><div class="line">            return password;</div><div class="line">        &#125;</div><div class="line">        public Connection getConnection() &#123;</div><div class="line">            try &#123;</div><div class="line">                Class.forName(driverName);</div><div class="line">                return DriverManager.getConnection(url, user, password);</div><div class="line">            &#125; catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">                message = &quot;数据库连接失败！&quot;;</div><div class="line">                return null;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        public static void main(String[] args) &#123;</div><div class="line">            try&#123;</div><div class="line">                JDBCTest dcm = new JDBCTest();</div><div class="line">                Connection conn = dcm.getConnection();</div><div class="line">                CallableStatement cs= conn.prepareCall(&quot;&#123;call usp_showrecordtest&#125;&quot;);</div><div class="line">                cs.execute();</div><div class="line">                ResultSet rs=cs.getResultSet();</div><div class="line"></div><div class="line">                System.out.println(rs);</div><div class="line">                System.out.println(message);</div><div class="line">            &#125;catch(Exception e)&#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="后续跟进hibernate来调用存储过程"><a href="#后续跟进hibernate来调用存储过程" class="headerlink" title="后续跟进hibernate来调用存储过程"></a>后续跟进hibernate来调用存储过程</h3>
    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/12/csdn/arch linux中的jdk的安装/">
  <time datetime="2016-06-12T02:51:11.000Z">
    2016-06-12
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/12/csdn/arch linux中的jdk的安装/">arch linux中的jdk的安装</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>编辑/etc/pacman.conf, 在文件末尾添加以下内容(操作前请做好相应备份)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[archlinuxcn]</div><div class="line">SigLevel = Optional TrustedOnly</div><div class="line">Server = http://mirrors.163.com/archlinux-cn/$arch</div></pre></td></tr></table></figure></p>
<p>之后安装 archlinuxcn-keyring 包导入 GPG key 从甲骨文的官网<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pacman -S jdk</div></pre></td></tr></table></figure></p>
<p>this all<br>thanks</p>

    
  </div>
  <footer class="end-sep">
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


  

  <nav id="pagination">
  
  
    <a href="/page/2/" class="next">Next</a>
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2016 <a href="/">linzi</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>